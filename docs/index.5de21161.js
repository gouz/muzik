function t(t){const e=parseInt(t,10);let i=Math.floor(e/3600),n=Math.floor((e-3600*i)/60),o=e-3600*i-60*n;return i<10&&(i="0"+i),n<10&&(n="0"+n),o<10&&(o="0"+o),("00"!=i?i+":":"")+n+":"+o}function e(t,e){let i=parseInt(t.substring(1,3),16),n=parseInt(t.substring(3,5),16),o=parseInt(t.substring(5,7),16);return i=parseInt(i*(100+e)/100),n=parseInt(n*(100+e)/100),o=parseInt(o*(100+e)/100),i=i<255?i:255,n=n<255?n:255,o=o<255?o:255,"#"+(1==i.toString(16).length?"0"+i.toString(16):i.toString(16))+(1==n.toString(16).length?"0"+n.toString(16):n.toString(16))+(1==o.toString(16).length?"0"+o.toString(16):o.toString(16))}window.muzik={},window.muzik.loadMeta=e=>{window.muzik.play(),document.getElementById("artwork").style.backgroundImage=`url(${e.img})`,document.getElementById("time-current").textContent=t(0),document.getElementById("time-total").textContent=t(e.duration),document.getElementById("timestamp").max=Math.round(e.duration);let i=e.artist,n=e.title;void 0!==window.muzik.song.artist&&""!=window.muzik.song.artist&&(i=window.muzik.song.artist),void 0!==window.muzik.song.title&&""!=window.muzik.song.title&&(n=window.muzik.song.title),document.getElementById("artist").textContent=i,document.getElementById("title").textContent=n,window.muzik.changeAmbiance(e.img),"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:n,artist:i,artwork:[{src:e.img,sizes:e.size,type:"image/png"}]}))};const i=e=>{document.getElementById("time-current").textContent=t(e);const i=document.getElementById("timestamp");i.value=e;const n=i.min,o=i.max,a=i.value;i.style.backgroundSize=100*(a-n)/(o-n)+"% 100%"};window.muzik.play=()=>{document.getElementById("play").classList.add("hide"),document.getElementById("pause").classList.remove("hide"),window.muzik.timer=setInterval((()=>{const t=window.muzik.player[window.muzik.song.type].getTime();i(t)}),300),window.muzik.player[window.muzik.song.type].play()},window.muzik.pause=()=>{clearInterval(window.muzik.timer),document.getElementById("play").classList.remove("hide"),document.getElementById("pause").classList.add("hide"),window.muzik.player[window.muzik.song.type].pause()},window.muzik.previous=()=>{clearInterval(window.muzik.timer),window.muzik.playlist.previous()},window.muzik.next=()=>{clearInterval(window.muzik.timer),window.muzik.playlist.next()},window.muzik.showClip=()=>{"youtube"==window.muzik.song.type&&document.getElementById("youtube-player").classList.toggle("over")},window.muzik.seek=t=>{clearInterval(window.muzik.timer),i(t),window.muzik.player[window.muzik.song.type].seek(t)},window.muzik.changeAmbiance=t=>{"youtube"!=window.muzik.song.type&&async function(t){return new Promise((e=>{let i=document.createElement("canvas").getContext("2d");i.imageSmoothingEnabled=!0;let n=new Image;n.src=t,n.crossOrigin="",n.onload=()=>{i.drawImage(n,0,0,1,1);let t=i.getImageData(0,0,1,1).data.slice(0,3);e("#"+(16777216+(t[0]<<16)+(t[1]<<8)+t[2]).toString(16).slice(1))}}))}(t).then((t=>{document.getElementById("colors").innerHTML=`\n      :root {\n          --muzik-track-color: ${e(t,30)};\n          --muzik-thumb-color: ${t};\n          --muzik-thumb-color-hover: ${e(t,-30)};\n      }\n\n      body {\n        background-color: ${t};\n      }\n    `}))},"mediaSession"in navigator&&(navigator.mediaSession.setActionHandler("play",(function(){window.muzik.play()})),navigator.mediaSession.setActionHandler("pause",(function(){window.muzik.pause()})),navigator.mediaSession.setActionHandler("previoustrack",(function(){window.muzik.previous()})),navigator.mediaSession.setActionHandler("nexttrack",(function(){window.muzik.next()})));class n{constructor(t){this.list=t,this.shuffle(this.list),this.currentTrack=0,window.muzik.song=null}shuffle=t=>{for(let e=t.length-1;e>0;e--){const i=Math.floor(Math.random()*(e+1));[t[e],t[i]]=[t[i],t[e]]}};load=()=>{const t=document.getElementById("video");t.classList.remove("hide"),"soundcloud"==this.list[this.currentTrack].type&&t.classList.add("hide"),0==this.currentTrack?document.getElementById("previous").classList.add("disabled"):this.currentTrack==this.list.length-1?document.getElementById("next").classList.add("disabled"):(document.getElementById("previous").classList.remove("disabled"),document.getElementById("next").classList.remove("disabled")),null!=window.muzik.song&&window.muzik.player[window.muzik.song.type].isReady&&window.muzik.player[window.muzik.song.type].pause(),window.muzik.song=this.list[this.currentTrack],window.muzik.player[window.muzik.song.type].load()};previous=()=>{this.currentTrack--,this.currentTrack<=0&&(this.currentTrack=0),this.load()};next=()=>{this.currentTrack++,this.currentTrack>=this.list.length&&(this.currentTrack=this.list.length-1),this.load()}}class o{constructor(){this.isReady=!1,this.player=null}onPlayerReady=t=>{t.target.playVideo()};onPlayerStateChange=t=>{YT.PlayerState.PLAYING==t.data?window.muzik.loadMeta({img:`https://i.ytimg.com/vi/${window.muzik.song.code}/hqdefault.jpg`,size:"480x360",duration:this.player.getDuration(),artist:this.player.getVideoData().artist,title:this.player.getVideoData().title}):YT.PlayerState.ENDED==t.data&&window.muzik.next()};load=()=>{this.isReady?this.player.loadVideoById(window.muzik.song.code):this.init()};play=()=>{this.player.playVideo()};pause=()=>{this.player.pauseVideo()};seek=t=>{this.player.seekTo(t)};getTime=()=>this.player.getCurrentTime();init=()=>{window.onYouTubeIframeAPIReady=()=>{this.isReady=!0,this.player=new YT.Player("youtube-player",{events:{onReady:this.onPlayerReady,onStateChange:this.onPlayerStateChange},playerVars:{autoplay:1,modestbranding:1,rel:0,origin:window.location.origin},videoId:window.muzik.song.code,host:"https://www.youtube.com"})};const t=document.createElement("script"),e=document.getElementsByTagName("script")[0];t.src="//www.youtube.com/iframe_api",e.parentNode.insertBefore(t,e)}}class a{constructor(){this.isReady=!1,this.player=null,this.position=0,this.interval=null}loaded=()=>{this.player.getCurrentSound((t=>{let e=null;e=null!==t.artwork_url?t.artwork_url:t.user.avatar_url,window.muzik.loadMeta({img:e,size:"100x100",duration:Math.round(t.full_duration/1e3),artist:t.user.full_name,title:t.title}),this.player.play()}))};init=()=>{this.isReady=!0,document.getElementById("soundcloud-player").setAttribute("src",`https://w.soundcloud.com/player/?url=https%3A//soundcloud.com${window.muzik.song.code}&amp;auto_play=true`),this.player=SC.Widget("soundcloud-player"),this.player.bind(SC.Widget.Events.FINISH,(()=>{clearInterval(this.interval),window.muzik.next()})),this.player.bind(SC.Widget.Events.READY,(()=>{this.loaded(),this.interval=setInterval((()=>{this.player.getPosition((t=>{this.position=t}))}),100)}))};load=()=>{this.isReady?this.player.load(window.muzik.song.code,{auto_play:"true",callback:()=>{this.loaded()}}):this.init()};play=()=>{this.player.play()};pause=()=>{this.player.pause()};seek=t=>{this.player.seekTo(1e3*t)};getTime=()=>Math.round(this.position/1e3)}var s;s=()=>{window.muzik.player={youtube:new o,soundcloud:new a},fetch("./list.v2.json").then((t=>t.json())).then((t=>{let e=[];t.list.youtube.forEach((function(t){t.type="youtube",e.push(t)})),t.list.soundcloud.forEach((function(t){t.type="soundcloud",e.push(t)})),window.muzik.playlist=new n(e),window.muzik.playlist.load()}))},"loading"!=document.readyState?s():document.addEventListener("DOMContentLoaded",s);