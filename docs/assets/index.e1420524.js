var C=Object.defineProperty;var P=(i,e,t)=>e in i?C(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var s=(i,e,t)=>(P(i,typeof e!="symbol"?e+"":e,t),t);const A=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}};A();window.$muzik={repeat_mode:0,track_keypress:!0,playlist:null,$artist:document.querySelector("#artist span"),$artwork:document.getElementById("artwork"),$colors:document.getElementById("colors"),$muted:document.getElementById("muted"),$next:document.getElementById("next"),$pause:document.getElementById("pause"),$play:document.getElementById("play"),$playlistList:document.getElementById("playlist-list"),$playlistWrapper:document.getElementById("playlist-wrapper"),$previous:document.getElementById("previous"),$repeat:document.getElementById("repeat"),$repeat1:document.getElementById("repeat1"),$searchField:document.getElementById("search-field"),$shuffle:document.getElementById("shuffle"),$timeCurrent:document.getElementById("time-current"),$timestamp:document.getElementById("timestamp"),$timeTotal:document.getElementById("time-total"),$title:document.querySelector("#title span"),$video:document.getElementById("video"),$volume:document.getElementById("volume"),$volumeRange:document.getElementById("volume-range"),$volumeWrapper:document.getElementById("volume-wrapper")};"mediaSession"in navigator&&(navigator.mediaSession.setActionHandler("play",function(){window.$muzik.play()}),navigator.mediaSession.setActionHandler("pause",function(){window.$muzik.pause()}),navigator.mediaSession.setActionHandler("previoustrack",function(){window.$muzik.previous()}),navigator.mediaSession.setActionHandler("nexttrack",function(){window.$muzik.next()}));document.addEventListener("keypress",i=>{if(window.$muzik.track_keypress){switch(i.stopImmediatePropagation(),i.preventDefault(),i.key){case"b":window.$muzik.previous();break;case"n":window.$muzik.next();break;case" ":window.$muzik.$pause.classList.contains("hide")?window.$muzik.play():window.$muzik.pause();break;case"s":window.$muzik.togglePlaylist(),window.$muzik.$searchField.focus();break;case"+":window.$muzik.$volumeRange.value=parseInt(window.$muzik.$volumeRange.value)+10,window.$muzik.volume(window.$muzik.$volumeRange.value);break;case"-":window.$muzik.$volumeRange.value=parseInt(window.$muzik.$volumeRange.value)-10,window.$muzik.volume(window.$muzik.$volumeRange.value);break;case"r":window.$muzik.repeat();break;case"v":window.$muzik.showClip();break;case"x":window.$muzik.shuffle();break;case"c":window.$muzik.share();break;case"q":window.$muzik.$playlistWrapper.classList.contains("hide")||window.$muzik.togglePlaylist();break}return!1}},!1);async function R(i){return new Promise(e=>{const t=document.createElement("canvas").getContext("2d");t.imageSmoothingEnabled=!0;const o=new Image;o.src=i,o.crossOrigin="Anonymous",o.onload=()=>{t.drawImage(o,0,0,3,3);let r=[];for(let a=0;a<3;a++){r[a]=[];for(let n=0;n<3;n++){const d=t.getImageData(n,a,1,1).data.slice(0,3);r[a][n]="#"+((1<<24)+(d[0]<<16)+(d[1]<<8)+d[2]).toString(16).slice(1)}}e(r)}})}const M=["M26.52 8.36a13 13 0 1 0-5.77 19.73l3.57.57a1 1 0 0 0 1.15-.83l.61-3.83a1 1 0 0 0-2-.31l-.45 2.87-2.87-.46a1 1 0 0 0-.54.07 11 11 0 1 1 6.18-6.63 1 1 0 1 0 1.89.64 13 13 0 0 0-1.77-11.82Z","M20 16a4 4 0 1 0-4 4 4 4 0 0 0 4-4Zm-6 0a2 2 0 1 1 2 2 2 2 0 0 1-2-2Z","M21.66 15a1 1 0 0 0 .33-.06 1 1 0 0 0 .61-1.27 7 7 0 0 0-4.27-4.27 1 1 0 0 0-.66 1.88 5.06 5.06 0 0 1 3 3.05 1 1 0 0 0 .99.67Zm-7.33 5.72a5.06 5.06 0 0 1-3.05-3 1 1 0 1 0-1.88.66 7 7 0 0 0 4.27 4.27 1 1 0 0 0 .33.06 1 1 0 0 0 .33-1.94Z","M24.78 15H25a1 1 0 0 0 .75-1.19 10 10 0 0 0-7.53-7.53 1 1 0 0 0-.44 1.95 8 8 0 0 1 6 6 1 1 0 0 0 1 .77Zm-10.56 8.8a8 8 0 0 1-6-6 1 1 0 1 0-1.95.44 10 10 0 0 0 7.53 7.53.83.83 0 0 0 .22 0 1 1 0 0 0 .22-2Z"];function _(i){const e=document.createElement("canvas");e.height=32,e.width=32;const t=e.getContext("2d");t.fillStyle=i,t.strokeStyle=i,M.forEach(a=>{t.stroke(new Path2D(a))});const o=document.createElement("link");document.querySelectorAll('link[rel="icon"]').forEach(a=>a.parentNode.removeChild(a)),o.id="dynamic-favicon",o.rel="icon",o.href=e.toDataURL(),document.head.appendChild(o)}window.$muzik.changeAmbiance=i=>{R(i).then(e=>{const t=e[1][1];window.$muzik.$colors.innerHTML=`
      body {
        background:
          linear-gradient(  0deg, ${e[2][1]}80 0%, ${e[1][1]}80 50%, ${e[0][1]}80 100%),
          linear-gradient( 90deg, ${e[1][0]}80 0%, ${e[1][1]}80 50%, ${e[2][0]}80 100%),
          linear-gradient( 45deg, ${e[2][0]}80 0%, ${e[1][1]}80 50%, ${e[0][2]}80 100%),
          linear-gradient(135deg, ${e[0][0]}80 0%, ${e[1][1]}80 50%, ${e[2][0]}80 100%);
      }
    `,document.querySelector('meta[name="theme-color"]').content=t,_(t)})};function y(i){const e=parseInt(i,10);let t=Math.floor(e/3600),o=Math.floor((e-t*3600)/60),r=e-t*3600-o*60;return t<10&&(t="0"+t),o<10&&(o="0"+o),r<10&&(r="0"+r),(t!="00"?t+":":"")+o+":"+r}function k(i,e){i.value=e;const t=i.min,o=i.max,r=i.value;i.style.backgroundSize=(r-t)*100/(o-t)+"% 100%"}window.$muzik.defineTimer=()=>{clearInterval(window.$muzik.timer),window.$muzik.timer=setInterval(()=>{const i=window.$muzik.player[window.$muzik.song.type].getTime();window.$muzik.$timeCurrent.textContent=y(i),k(window.$muzik.$timestamp,i),window.$muzik.player[window.$muzik.song.type].isPlaying||(window.$muzik.$play.classList.remove("hide"),window.$muzik.$pause.classList.add("hide"))},300)};window.$muzik.initMediaSessionHandler=()=>{"mediaSession"in navigator&&(navigator.mediaSession.setActionHandler("play",function(){window.$muzik.play()}),navigator.mediaSession.setActionHandler("pause",function(){window.$muzik.pause()}),navigator.mediaSession.setActionHandler("stop",function(){window.$muzik.pause()}),navigator.mediaSession.setActionHandler("seekto",function(i){window.$muzik.seek(i.seekTime)}),navigator.mediaSession.setActionHandler("previoustrack",function(){window.$muzik.previous()}),navigator.mediaSession.setActionHandler("nexttrack",function(){window.$muzik.next()}))};var z={exports:{}},x={exports:{}};(function(){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e={rotl:function(t,o){return t<<o|t>>>32-o},rotr:function(t,o){return t<<32-o|t>>>o},endian:function(t){if(t.constructor==Number)return e.rotl(t,8)&16711935|e.rotl(t,24)&4278255360;for(var o=0;o<t.length;o++)t[o]=e.endian(t[o]);return t},randomBytes:function(t){for(var o=[];t>0;t--)o.push(Math.floor(Math.random()*256));return o},bytesToWords:function(t){for(var o=[],r=0,a=0;r<t.length;r++,a+=8)o[a>>>5]|=t[r]<<24-a%32;return o},wordsToBytes:function(t){for(var o=[],r=0;r<t.length*32;r+=8)o.push(t[r>>>5]>>>24-r%32&255);return o},bytesToHex:function(t){for(var o=[],r=0;r<t.length;r++)o.push((t[r]>>>4).toString(16)),o.push((t[r]&15).toString(16));return o.join("")},hexToBytes:function(t){for(var o=[],r=0;r<t.length;r+=2)o.push(parseInt(t.substr(r,2),16));return o},bytesToBase64:function(t){for(var o=[],r=0;r<t.length;r+=3)for(var a=t[r]<<16|t[r+1]<<8|t[r+2],n=0;n<4;n++)r*8+n*6<=t.length*8?o.push(i.charAt(a>>>6*(3-n)&63)):o.push("=");return o.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/ig,"");for(var o=[],r=0,a=0;r<t.length;a=++r%4)a!=0&&o.push((i.indexOf(t.charAt(r-1))&Math.pow(2,-2*a+8)-1)<<a*2|i.indexOf(t.charAt(r))>>>6-a*2);return o}};x.exports=e})();var b={utf8:{stringToBytes:function(i){return b.bin.stringToBytes(unescape(encodeURIComponent(i)))},bytesToString:function(i){return decodeURIComponent(escape(b.bin.bytesToString(i)))}},bin:{stringToBytes:function(i){for(var e=[],t=0;t<i.length;t++)e.push(i.charCodeAt(t)&255);return e},bytesToString:function(i){for(var e=[],t=0;t<i.length;t++)e.push(String.fromCharCode(i[t]));return e.join("")}}},$=b;(function(){var i=x.exports,e=$.utf8,t=$.bin,o=function(a){a.constructor==String?a=e.stringToBytes(a):typeof Buffer!="undefined"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(a)?a=Array.prototype.slice.call(a,0):Array.isArray(a)||(a=a.toString());var n=i.bytesToWords(a),d=a.length*8,p=[],m=1732584193,w=-271733879,u=-1732584194,c=271733878,h=-1009589776;n[d>>5]|=128<<24-d%32,n[(d+64>>>9<<4)+15]=d;for(var f=0;f<n.length;f+=16){for(var S=m,L=w,T=u,I=c,E=h,l=0;l<80;l++){if(l<16)p[l]=n[f+l];else{var v=p[l-3]^p[l-8]^p[l-14]^p[l-16];p[l]=v<<1|v>>>31}var B=(m<<5|m>>>27)+h+(p[l]>>>0)+(l<20?(w&u|~w&c)+1518500249:l<40?(w^u^c)+1859775393:l<60?(w&u|w&c|u&c)-1894007588:(w^u^c)-899497514);h=c,c=u,u=w<<30|w>>>2,w=m,m=B}m+=S,w+=L,u+=T,c+=I,h+=E}return[m,w,u,c,h]},r=function(a,n){var d=i.wordsToBytes(o(a));return n&&n.asBytes?d:n&&n.asString?t.bytesToString(d):i.bytesToHex(d)};r._blocksize=16,r._digestsize=20,z.exports=r})();var g=z.exports;window.$muzik.loadMeta=i=>{window.$muzik.play(),window.location.hash=g(window.$muzik.song.code),window.$muzik.$artwork.style.backgroundImage=`url(${i.img})`,window.$muzik.$timeCurrent.textContent=y(0),window.$muzik.$timeTotal.textContent=y(i.duration),window.$muzik.$timestamp.max=Math.round(i.duration);let e=i.artist,t=i.title;typeof window.$muzik.song.artist!="undefined"&&window.$muzik.song.artist!=""&&(e=window.$muzik.song.artist),typeof window.$muzik.song.title!="undefined"&&window.$muzik.song.title!=""&&(t=window.$muzik.song.title),window.$muzik.$artist.textContent=e,window.$muzik.$title.textContent=t,window.$muzik.changeAmbiance(i.img),window.$muzik.notify({artwork:i.img,artist:e,title:t}),"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:t,artist:e,artwork:[{src:i.img,sizes:i.size,type:"image/png"}]}))};class H{constructor(e,t){s(this,"load",()=>{const e=window.$muzik.$video;this.list[this.currentTrack].type!="youtube"?(e.classList.add("hide"),document.getElementById("youtube-player").classList.add("hide")):this.list[this.currentTrack].type=="youtube"&&(e.classList.remove("hide"),document.getElementById("youtube-player").classList.remove("hide")),window.$muzik.manageControls(),window.$muzik.song!=null&&window.$muzik.player[window.$muzik.song.type].isReady&&window.$muzik.player[window.$muzik.song.type].pause(),window.$muzik.song=this.list[this.currentTrack],window.$muzik.player[window.$muzik.song.type].load();const t=window.$muzik.$playlistList.querySelector("li.current");t!=null&&t.classList.remove("current"),window.$muzik.$playlistList.querySelectorAll("li")[this.currentTrack].classList.add("current")});s(this,"previous",()=>{this.currentTrack--,this.currentTrack<=0&&(window.$muzik.repeat_mode==1?this.currentTrack=this.list.length-1:this.currentTrack=0),this.load()});s(this,"next",(e,t)=>{if(typeof t=="undefined"&&(t=!1),e||window.$muzik.repeat_mode!=2)if(window.$muzik.$shuffle.classList.contains("active")&&!t){let o=JSON.parse(sessionStorage.getItem("songsplayed"));do this.currentTrack=Math.floor(Math.random()*this.list.length);while(o.includes(this.currentTrack));o.push(this.currentTrack),sessionStorage.setItem("songsplayed",JSON.stringify(o))}else this.currentTrack++;this.currentTrack>=this.list.length&&(window.$muzik.repeat_mode==1?this.currentTrack=0:this.currentTrack=this.list.length-1),this.load()});s(this,"playSong",e=>{const t=this.list.findIndex(o=>g(o.code)==e);this.currentTrack=t-1,this.next(!0,!0)});this.list=e,this.currentTrack=0,t!=""&&(this.currentTrack=this.list.findIndex(r=>g(r.code)==t));let o="";this.list.forEach(r=>{const a=g(r.code);o+=`
        <li id="${a}">
          <a href="javascript:window.$muzik.playlist.playSong('${a}');">
            ${r.artist} | ${r.title}
          </a>
        </li>
      `}),window.$muzik.$playlistList.innerHTML=o,window.$muzik.$songs=window.$muzik.$playlistList.querySelectorAll("li"),window.$muzik.song=null,this.load()}}window.$muzik.loadPlaylist=i=>{fetch(i).then(e=>e.json()).then(e=>{let t=[];for(const[o,r]of Object.entries(e.list))r.forEach(a=>{a.type=o,t.push(a)});window.$muzik.playlist=new H(t,window.location.hash.substring(1)),window.$muzik.manageControls()})};window.$muzik.manageControls=()=>{if(window.$muzik.playlist!=null){const i=window.$muzik.playlist.currentTrack,e=window.$muzik.playlist.list.length-1,t=window.$muzik.repeat_mode==1,o=window.$muzik.$shuffle.classList.contains("active");i==0||o?window.$muzik.$previous.classList.add("disabled"):window.$muzik.$previous.classList.remove("disabled"),!o&&e==i&&!t?window.$muzik.$next.classList.add("disabled"):window.$muzik.$next.classList.remove("disabled")}};window.$muzik.next=i=>{clearInterval(window.$muzik.timer),window.$muzik.$next.classList.contains("disabled")||window.$muzik.playlist.next(i)};window.$muzik.notify=i=>{window.Notification&&(Notification.permission==="granted"?new Notification(i.artist,{body:i.title,icon:i.artwork}):Notification.requestPermission().then(e=>{e==="granted"&&new Notification(i.artist,{body:i.title,icon:i.artwork})}).catch(()=>{}))};window.$muzik.pause=()=>{clearInterval(window.$muzik.timer),window.$muzik.$play.classList.remove("hide"),window.$muzik.$pause.classList.add("hide"),window.$muzik.player[window.$muzik.song.type].pause()};window.$muzik.play=()=>{window.$muzik.$play.classList.add("hide"),window.$muzik.$pause.classList.remove("hide"),window.$muzik.defineTimer(),window.$muzik.player[window.$muzik.song.type].play()};window.$muzik.previous=()=>{clearInterval(window.$muzik.timer),window.$muzik.$previous.classList.contains("disabled")||window.$muzik.playlist.previous()};window.$muzik.repeat=()=>{window.$muzik.repeat_mode==0?(window.$muzik.repeat_mode=1,window.$muzik.$repeat.classList.add("active")):window.$muzik.repeat_mode==1?(window.$muzik.repeat_mode=2,window.$muzik.$repeat.classList.remove("active"),window.$muzik.$repeat.classList.add("hide"),window.$muzik.$repeat1.classList.remove("hide")):(window.$muzik.repeat_mode=0,window.$muzik.$repeat1.classList.add("hide"),window.$muzik.$repeat.classList.remove("hide")),window.$muzik.manageControls()};window.$muzik.search=i=>{i=i.toLowerCase(),window.$muzik.$songs.forEach(e=>{e.textContent.toLowerCase().includes(i)?e.classList.remove("hide"):e.classList.add("hide")})};window.$muzik.seek=(i,e)=>{window.$muzik.$timeCurrent.textContent=y(i),k(window.$muzik.$timestamp,i),clearInterval(window.$muzik.timer),e&&(window.$muzik.player[window.$muzik.song.type].seek(i),window.$muzik.defineTimer())};window.$muzik.share=()=>{navigator.clipboard.writeText(window.location).then(()=>{alert("Link copied to clipboard")})};window.$muzik.showClip=()=>{window.$muzik.song.type=="youtube"&&(document.getElementById("youtube-player").classList.toggle("over"),window.$muzik.$video.classList.toggle("active"))};window.$muzik.showVolume=()=>{window.$muzik.$volumeWrapper.classList.toggle("hide"),window.$muzik.$volume.classList.toggle("active")};window.$muzik.shuffle=()=>{window.$muzik.$shuffle.classList.toggle("active"),window.$muzik.$shuffle.classList.contains("active")&&sessionStorage.setItem("songsplayed",JSON.stringify([])),window.$muzik.manageControls()};window.$muzik.toggleKeyTrack=()=>{window.$muzik.track_keypress=!window.$muzik.track_keypress};window.$muzik.togglePlaylist=()=>{window.$muzik.$playlistWrapper.classList.toggle("hide"),window.$muzik.$songs.forEach(i=>i.classList.remove("hide")),window.$muzik.$searchField.value="",document.getElementById(window.location.hash.substring(1)).scrollIntoView()};window.$muzik.volume=i=>{i==0?(window.$muzik.$muted.classList.remove("hide"),window.$muzik.$volume.classList.add("hide")):(window.$muzik.$muted.classList.add("hide"),window.$muzik.$volume.classList.remove("hide")),k(window.$muzik.$volumeRange,i),window.$muzik.player[window.$muzik.song.type].setVolume(i)};class F{constructor(){s(this,"onPlayerReady",e=>{e.target.playVideo()});s(this,"onPlayerStateChange",e=>{YT.PlayerState.PLAYING==e.data?(window.$muzik.loadMeta({img:`//images.weserv.nl/?url=https://i.ytimg.com/vi/${window.$muzik.song.code}/hqdefault.jpg&w=300`,size:"300x300",duration:this.player.getDuration(),artist:this.player.getVideoData().artist,title:this.player.getVideoData().title}),this.isPlaying=!0,this.setVolume(window.$muzik.$volumeRange.value)):YT.PlayerState.ENDED==e.data?window.$muzik.next(!1):YT.PlayerState.PAUSED==e.data&&(this.isPlaying=!1)});s(this,"load",()=>{this.isReady?this.player.loadVideoById(window.$muzik.song.code):this.init()});s(this,"play",()=>{this.player.playVideo()});s(this,"pause",()=>{this.player.pauseVideo(),this.isPlaying=!1});s(this,"seek",e=>{this.player.seekTo(e)});s(this,"getTime",()=>this.player.getCurrentTime());s(this,"setVolume",e=>{this.player.setVolume(e)});s(this,"init",()=>{window.onYouTubeIframeAPIReady=()=>{this.isReady=!0,this.player=new YT.Player("youtube-player",{events:{onReady:this.onPlayerReady,onStateChange:this.onPlayerStateChange},playerVars:{autoplay:1,modestbranding:1,rel:0,origin:window.location.origin,width:320},videoId:window.$muzik.song.code,host:"https://www.youtube.com"})};const e=document.createElement("script"),t=document.getElementsByTagName("script")[0];e.src="//www.youtube.com/iframe_api",t.parentNode.insertBefore(e,t)});this.isReady=!1,this.isPlaying=!1,this.player=null}}class N{constructor(){s(this,"loaded",()=>{this.player.getCurrentSound(e=>{let t=null;e.artwork_url!==null?t=e.artwork_url:t=e.user.avatar_url,window.$muzik.loadMeta({img:t.replace("-large.jpg","-t300x300.jpg"),size:"300x300",duration:Math.round(e.full_duration/1e3),artist:e.user.full_name,title:e.title}),this.setVolume(window.$muzik.$volumeRange.value),this.player.seekTo(0)})});s(this,"init",()=>{this.isReady=!0,document.getElementById("soundcloud-player").setAttribute("src",`https://w.soundcloud.com/player/?url=https%3A//soundcloud.com${window.$muzik.song.code}&amp;auto_play=true`),this.player=SC.Widget("soundcloud-player"),this.player.bind(SC.Widget.Events.READY,()=>{this.player.bind(SC.Widget.Events.PLAY_PROGRESS,()=>{this.player.getPosition(e=>{this.position=e})}),this.player.bind(SC.Widget.Events.FINISH,()=>{window.$muzik.next(!1)}),this.player.bind(SC.Widget.Events.PAUSE,()=>{this.isPlaying=!1}),this.player.bind(SC.Widget.Events.PLAY,()=>{this.isPlaying=!0,this.position>=0&&this.player.seekTo(this.position)}),this.loaded()})});s(this,"load",()=>{this.position=0,this.isReady?this.player.load(window.$muzik.song.code,{auto_play:"true",callback:()=>{this.loaded()}}):this.init()});s(this,"play",()=>{this.player.play(),this.isPlaying=!0});s(this,"pause",()=>{this.player.pause(),this.isPlaying=!1});s(this,"seek",e=>{this.isPlaying=!0,this.position=e*1e3,this.player.isPaused(t=>{t==!0?this.player.play():this.player.seekTo(e*1e3)})});s(this,"getTime",()=>Math.round(this.position/1e3));s(this,"setVolume",e=>{this.player.setVolume(e)});this.isReady=!1,this.isPlaying=!1,this.player=null,this.position=0}}const V=i=>{document.readyState!="loading"?i():document.addEventListener("DOMContentLoaded",i)};V(()=>{window.$muzik.player={youtube:new F,soundcloud:new N},window.$muzik.initMediaSessionHandler(),k(window.$muzik.$volumeRange,50),window.$muzik.loadPlaylist("https://raw.githubusercontent.com/gouz/muzik/main/songs/list.json"),window.$muzik.shuffle()});
